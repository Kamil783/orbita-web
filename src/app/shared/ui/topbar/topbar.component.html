<header class="topbar">
  <div class="left">
    <h2 class="title">{{ title }}</h2>

    <ng-content select="[topbar-left-extra]"></ng-content>

    <div class="search">
      <span class="material-symbols-outlined search__icon">search</span>
      <input class="search__input" type="text" [placeholder]="placeholder" />
    </div>
  </div>

  <div class="right">
    <button
      class="iconbtn"
      type="button"
      (click)="toggleTheme()"
      [attr.aria-label]="themeService.isDarkTheme ? 'Светлая тема' : 'Темная тема'"
      disabled
    >
      <span class="material-symbols-outlined">{{ themeService.isDarkTheme ? 'light_mode' : 'dark_mode' }}</span>
    </button>

    <div class="notify-wrapper">
      <button class="iconbtn iconbtn--notify" type="button" (click)="toggleNotifications()" aria-label="Уведомления">
        <span class="material-symbols-outlined">notifications</span>
        @if (notificationService.unreadCount() > 0) {
          <span class="badge" aria-hidden="true">{{ notificationService.unreadCount() }}</span>
        }
      </button>

      @if (showNotifications()) {
        <app-notification-dropdown></app-notification-dropdown>
      }
    </div>

    <div class="divider"></div>

    <a class="profile" routerLink="/profile" aria-label="Профиль">
      @if (userService.avatarUrl()) {
        <img class="profile__avatar profile__avatar--img" [src]="userService.avatarUrl()" alt="Аватар" />
      } @else {
        <span class="profile__avatar" aria-hidden="true">{{ userService.initial() }}</span>
      }
      <span class="profile__name">{{ userService.name() }}</span>
    </a>
  </div>
</header>
